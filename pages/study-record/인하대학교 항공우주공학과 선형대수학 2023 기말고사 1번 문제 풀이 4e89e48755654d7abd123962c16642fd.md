# ì¸í•˜ëŒ€í•™êµ í•­ê³µìš°ì£¼ê³µí•™ê³¼ ì„ í˜•ëŒ€ìˆ˜í•™ 2023 ê¸°ë§ê³ ì‚¬ 1ë²ˆ ë¬¸ì œ í’€ì´

date: 2024ë…„ 1ì›” 8ì¼
slug: ase2010_final_exam_1
author: jinwoo im
status: Public
tags: Linear Control
summary: 2023 í•­ìš°ê³µ ì„ ëŒ€ ê¸°ë§ê³ ì‚¬ 1ë²ˆë¬¸ì œ
type: Post
updatedAt: 2025ë…„ 3ì›” 16ì¼ ì˜¤í›„ 6:47
category: ğŸ“— LinearAlgebra

# **2023 ASE 2010 final exam ë¬¸ì œ í’€ì´**

## Node delays in Incheon subway traffic

***(Problem 1)***Â ì•„ë˜ì˜ ì¸ì²œ ì§€í•˜ì²  ë…¸ì„ ë„ë¥¼ ì‚´í´ë³´ì.Â ië²ˆì§¸ ì—­ì—ì„œÂ i+1ë²ˆì¨° ì—­ìœ¼ë¡œ ì§€í•˜ì² ì´ ì´ë™í•˜ëŠ” ë° ì†Œìš”ë˜ëŠ” ì‹œê°„ì„Â $a_i$ë¼ê³  í•˜ê³ ,Â ië²ˆì§¸ ì—­ì—ì„œ ê°œì°°êµ¬ì™€ íƒ‘ìŠ¹êµ¬ ì‚¬ì´ë¥¼ ì´ë™í•˜ëŠ”ë° ì†Œìš”ë˜ëŠ” ì‹œê°„ì„Â $b_i$ë¼ê³  í•˜ì. ê·¸ë ‡ë‹¤ë©´ ì–´ë–¤Â kë²ˆì§¸ íƒ‘ìŠ¹ê°ì´Â ië²ˆì§¸ ì—­ì—ì„œÂ jë²ˆì§¸ ì—­ìœ¼ë¡œ ì´ë™í•˜ëŠ” ë° ì†Œìš”ë˜ëŠ” ì‹œê°„(ì¶œë°œì—­ ê°œì°°êµ¬ì—ì„œ êµí†µì¹´ë“œë¥¼ íƒœê·¸í•œ ì‹œê°„ìœ¼ë¡œë¶€í„° ë„ì°©ì—­ ê°œì°°êµ¬ì—ì„œ êµí†µì¹´ë“œë¥¼ íƒœê·¸í•œ ì‹œê°„ì˜ ì°¨)ì€Â ($a_i+a_{i+1}+â‹¯+a_{jâˆ’1}$)+$b_i$+$b_j$ê°€ ë˜ë©° (j>iì¸ ê²½ìš°), ì´ ì‹œê°„ì€ ìŠ¹ê°ì´ ì¶œë°œì—­ê³¼ ë„ì°©ì—­ ê°œì°°êµ¬ì—ì„œ êµí†µì¹´ë“œë¥¼ íƒœê·¸í•œ ì‹œê°„ ê¸°ë¡ìœ¼ë¡œë¶€í„° ì¸¡ì •í•  ìˆ˜ ìˆë‹¤. (ë‹¨, ì§€í•˜ì² ì´ ë„ì°©í•  ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ëŠ” ì‹œê°„ê³¼ íƒ‘ìŠ¹êµ¬ê°€ ì—´ë¦¬ëŠ”ë° ì†Œìš”ë˜ëŠ” ì‹œê°„ì€Â aì— í¬í•¨ëœë‹¤ê³  ê°€ì •í•œë‹¤.)

![Untitled](%EC%9D%B8%ED%95%98%EB%8C%80%ED%95%99%EA%B5%90%20%ED%95%AD%EA%B3%B5%EC%9A%B0%EC%A3%BC%EA%B3%B5%ED%95%99%EA%B3%BC%20%EC%84%A0%ED%98%95%EB%8C%80%EC%88%98%ED%95%99%202023%20%EA%B8%B0%EB%A7%90%EA%B3%A0%EC%82%AC%201%EB%B2%88%20%EB%AC%B8%EC%A0%9C%20%ED%92%80%EC%9D%B4%204e89e48755654d7abd123962c16642fd/Untitled.png)

ë…¸ì„ ë„ì— ì´ nê°œì˜ ì—­ì´ ì¡´ì¬í•  ë•Œ, ê° ì—­ì—ì„œ ì—´ì°¨ê°€ ì¶œë°œí•˜ì—¬ ë‹¤ìŒ ì—­ì— ë„ì°©í•  ë•Œ ê¹Œì§€ ì†Œìš”ë˜ëŠ” ì‹œê°„ì„ ì„¤ëª…í•˜ëŠ” ë²¡í„°  $aâˆˆR_{nâˆ’1}$ ì™€ ê° ì—­ì˜ ê°œì°°êµ¬ë¡œë¶€í„° íƒ‘ìŠ¹êµ¬ê¹Œì§€ì˜ ì´ë™ì‹œê°„ì„ ì„¤ëª…í•˜ëŠ” ë²¡í„°

$bâˆˆR_{i}$ë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤. ì¸ì²œêµí†µê³µì‚¬ì—ì„œ ìŠ¹ê° 10ë§Œëª…ì˜ êµí†µì¹´ë“œ íƒœê·¸ ê¸°ë¡ìœ¼ë¡œë¶€í„° ìŠ¹ì°¨ì—­ ë° í•˜ì°¨ì—­, ê·¸ë¦¬ê³  ì§€í•˜ì²  ì´ìš©ì‹œê°„(ìŠ¹ì°¨ì—­-í•˜ì°¨ì—­ íƒœê·¸ ì‹œê°„ ì°¨ì´)ì„ ê¸°ë¡í•˜ì—¬

```
passenger_data.csv
```

íŒŒì¼ì— ì €ì¥í•˜ì˜€ë‹¤ê³  ê°€ì •í•˜ì. ì´ë¥¼ ì´ìš©í•´ ì•„ë˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ì‹œì˜¤. (ë‹¨, ìœ„ ì •ì˜ì—ì„œ ì†¡ë„ë‹¬ë¹›ì¶•ì œê³µì› ë°©ë©´ê³¼, ê·¸ ë°˜ëŒ€ ë°©í–¥ì¸ ê³„ì–‘ ë°©ë©´ìœ¼ë¡œ ì´ë™í•˜ëŠ” ì—´ì°¨ì˜ ì†ë„ëŠ” ë™ì¼í•˜ë‹¤ê³  ê°€ì •í•˜ë©°, ëª¨ë“  ì‹œê°„ ë‹¨ìœ„ëŠ” 'ë¶„'ì´ë‹¤.) (ì•„ë˜ ì…€ì„ ì‹¤í–‰í•˜ì—¬ í•œê¸€ í°íŠ¸ë¥¼ ì„¤ì¹˜í•œ ë’¤ ëŸ°íƒ€ì„ì„ ì¬ì‹¤í–‰í•˜ë©´ ê·¸ë˜í”„ì˜ x, y ë ˆì´ë¸”ì„ í•œê¸€ë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.)

***(Problem 1-a)***Â ì•„ë˜ì˜ ì…€ì„ ì‹¤í–‰í•˜ë©´Â `passenger_data.csv`Â íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í™œìš©í•´ì„œ, ê° ìŠ¹ê°ì´ ìŠ¹ì°¨ì—­ìœ¼ë¡œë¶€í„° í•˜ì°¨ì—­ê¹Œì§€ ì´ë™í•˜ëŠ”ë° ì†Œìš”ëœ ì‹œê°„ ì¤‘, ì§€í•˜ì² ì— íƒ„ ì±„ë¡œ ì´ë™í•˜ëŠ”ë° ì†Œìš”ëœ ì‹œê°„ì„Â $X_a(k,m)a$ ë¡œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” í–‰ë ¬Â $X_{a}âˆˆR^{KÃ—(nâˆ’1)}$ì™€, ê°œì°°êµ¬ì™€ íƒ‘ìŠ¹êµ¬ ì‚¬ì´ë¥¼ ì´ë™í•˜ëŠ”ë° ì†Œìš”í•œ ì‹œê°„ì„Â $X_b(k,m)b$ ë¡œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” í–‰ë ¬Â $X_{b}âˆˆR^{KÃ—(n)}$ì„ ìƒì„±í•˜ì‹œì˜¤. (Hint: ì•„ë˜ ìˆ˜ì‹ ì°¸ì¡°)

- ìŠ¹ê°Â kê°€ ì—­Â iì—ì„œ ìŠ¹ì°¨í•˜ì—¬ ì—­Â jì—ì„œ í•˜ì°¨í•œ ê²½ìš°
    - $X_{a}(k,m)=1, for\,mâˆˆ{(i,i+1,â‹¯jâˆ’1)}$Â (ì†¡ë„ë‹¬ë¹›ì¶•ì œê³µì› ë°©ë©´ ì—´ì°¨ë¥¼ íƒ‘ìŠ¹í•œ ê²½ìš°,Â i<j)
    - $X_{a}(k,m)=1, for\,mâˆˆ{(i-1,i-2,â‹¯j)}$Â (ì†¡ë„ë‹¬ë¹›ì¶•ì œê³µì› ë°©ë©´ ì—´ì°¨ë¥¼ íƒ‘ìŠ¹í•œ ê²½ìš°,Â i>j)
    - $X_b(k,i)=X_b(k,j)=1$

ì´ì— ëŒ€í•œ **ë‚´ í’€ì´**ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 

### Problem 1-a í’€ì´

```python
import numpy as np
import pandas as pd

name = { 0:"ê³„ì–‘", 1:"ê·¤í˜„", 2:"ë°•ì´Œ", 3:"ì„í•™", 4:"ê³„ì‚°", 5:"ê²½ì¸êµëŒ€ì…êµ¬", \
            6:"ì‘ì „", 7:"ê°ˆì‚°", 8:"ë¶€í‰êµ¬ì²­", 9:"ë¶€í‰ì‹œì¥", 10:"ë¶€í‰", 11:"ë™ìˆ˜", \
             12:"ë¶€í‰ì‚¼ê±°ë¦¬", 13:"ê°„ì„ì˜¤ê±°ë¦¬", 14:"ì¸ì²œì‹œì²­", 15:"ì˜ˆìˆ íšŒê´€", \
             16:"ì¸ì²œí„°ë¯¸ë„", 17:"ë¬¸í•™ê²½ê¸°ì¥", 18:"ì„ í•™", 19:"ì‹ ì—°ìˆ˜", 20:"ì›ì¸ì¬", \
             21:"ë™ì¶˜", 22:"ë™ë§‰", 23:"ìº í¼ìŠ¤íƒ€ìš´", 24:"í…Œí¬ë…¸íŒŒí¬", 25:"ì§€ì‹ì •ë³´ë‹¨ì§€", \
             26:"ì¸ì²œëŒ€ì…êµ¬", 27:"ì„¼íŠ¸ëŸ´íŒŒí¬", 28:"êµ­ì œì—…ë¬´ì§€êµ¬", 29:"ì†¡ë„ë‹¬ë¹›ì¶•ì œê³µì›" }

inv_name = dict( zip(name.values(), name.keys()) )
data = pd.read_csv( "https://jonghank.github.io/ase2010/files/passenger_data.csv", index_col=0 )
n = len(name)
K = len(data)
X_a = []
X_b  = []
for index, row in data.iterrows():
  L1 = [0 for i in range(n-1)]
  L2 = [1 if i == inv_name[row["íƒ‘ìŠ¹"]] or i == inv_name[row["í•˜ì°¨"]] else 0 for i in range(n)]
  for i in range(min(inv_name[row["íƒ‘ìŠ¹"]],inv_name[row["í•˜ì°¨"]]),max(inv_name[row["íƒ‘ìŠ¹"]],inv_name[row["í•˜ì°¨"]])):
    L1[i] = 1
  X_a.append(L1)
  X_b.append(L2)

X_a = np.array(X_a)
X_b = np.array(X_b)
```

### 

***(Problem 1-b)***Â ìŠ¹ì°¨ì—­-í•˜ì°¨ì—­ ì‚¬ì´ì˜ ì´ë™ì‹œê°„ a ì™€ ê°œì°°êµ¬-íƒ‘ìŠ¹êµ¬ ì´ë™ ì†Œìš”ì‹œê°„ bì˜ ê°’ì„ ì¶”ì‚°í•˜ê¸° ìœ„í•œ ê°€ì¥ í•©ë¦¬ì ì¸ ë°©ë²•ì„ ì œì‹œí•˜ì‹œì˜¤. ì œì‹œí•œ ë°©ë²•ì„ ì£¼ì–´ì§„ ìŠ¹í•˜ì ê¸°ë¡ ë°ì´í„°ì— ì ìš©í•˜ì—¬ a ì™€ bë¥¼ ê³„ì‚°í•˜ê³  bar graph í˜•íƒœë¡œ ì¶œë ¥í•˜ì‹œì˜¤.

---

### Problem 1-b

ë‹¤ìŒê³¼ ê°™ì€ ì„ í˜•ë°©ì •ì‹ì€

$$
y = X_a a + X_b b \\=\begin{bmatrix}X_a, X_b\end{bmatrix} \begin{bmatrix}a\\b\end{bmatrix} 
$$

ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤.

Least Squares Solutionì„ ì‚¬ìš©í•˜ë©´

$X_{des} = \begin{bmatrix}a\\ b\end{bmatrix} = [[X_a,X_b]^{T}[X_a,X_b]]^{-1}[X_a,X_b]^{T}y$ 

ì´ê³  ì´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 

```python
y = np.array(data["ì†Œìš”ì‹œê°„"])

#least square ë¬¸ì œ ì •ì˜
A = np.hstack([X_a,X_b])
x = np.linalg.lstsq(A,y,rcond = None)[0]
a = x[0:29]
b = x[29:]

# a ê°’ì„ ì¶œë ¥
station_names =   list(inv_name.keys())
trans_time = []
for i in range(len(station_names)-1):
  trans_time.append(station_names[i] + ":"+station_names[i+1])
fig, ax = plt.subplots(figsize=(15, 8))
index = np.arange(len(trans_time))
bar_width = 0.35
bar2 = ax.bar(index + bar_width, a, bar_width, label='a')
ax.set_xlabel('ì¶œë°œì—­ê³¼ ê·¸ ë‹¤ìŒì—­')
ax.set_ylabel('ê°’')
ax.set_xticks(index + bar_width / 2)
ax.set_xticklabels(trans_time , rotation=45, ha="right")
ax.legend()
plt.show()

# bê°’ì„ ì¶œë ¥
fig, ax = plt.subplots(figsize=(15, 8))
index = np.arange(len(station_names))
bar_width = 0.35
bar2 = ax.bar(index + bar_width, b, bar_width, label='b')
ax.set_xlabel('ì—­ ì´ë¦„')
ax.set_ylabel('ê°’')
ax.set_xticks(index + bar_width / 2)
ax.set_xticklabels(station_names, rotation=45, ha="right")
ax.legend()
plt.show()

```

![Untitled](%EC%9D%B8%ED%95%98%EB%8C%80%ED%95%99%EA%B5%90%20%ED%95%AD%EA%B3%B5%EC%9A%B0%EC%A3%BC%EA%B3%B5%ED%95%99%EA%B3%BC%20%EC%84%A0%ED%98%95%EB%8C%80%EC%88%98%ED%95%99%202023%20%EA%B8%B0%EB%A7%90%EA%B3%A0%EC%82%AC%201%EB%B2%88%20%EB%AC%B8%EC%A0%9C%20%ED%92%80%EC%9D%B4%204e89e48755654d7abd123962c16642fd/Untitled%201.png)

![Untitled](%EC%9D%B8%ED%95%98%EB%8C%80%ED%95%99%EA%B5%90%20%ED%95%AD%EA%B3%B5%EC%9A%B0%EC%A3%BC%EA%B3%B5%ED%95%99%EA%B3%BC%20%EC%84%A0%ED%98%95%EB%8C%80%EC%88%98%ED%95%99%202023%20%EA%B8%B0%EB%A7%90%EA%B3%A0%EC%82%AC%201%EB%B2%88%20%EB%AC%B8%EC%A0%9C%20%ED%92%80%EC%9D%B4%204e89e48755654d7abd123962c16642fd/Untitled%202.png)

***(Problem 1-c)***Â ì˜ˆìˆ íšŒê´€ ì—­ ê·¼ì²˜ì— ì‚´ê³  ìˆëŠ” í•™ìƒì´ í…Œí¬ë…¸íŒŒí¬ì—­ í•­ê³µìº í¼ìŠ¤ì—ì„œ ì—´ë¦¬ëŠ” 10ì‹œ 30ë¶„ ìˆ˜ì—…ì— ë“¤ì–´ì˜¤ê¸° ìœ„í•´ ì§€í•˜ì² ì„ íƒ€ë ¤ë©´ ì ì–´ë„ ëª‡ì‹œ ì „ì—ëŠ” ì˜ˆìˆ íšŒê´€ ì—­ì— ë„ì°©í•˜ë„ë¡ ì¤€ë¹„í•´ì•¼ í• ê¹Œ? (í…Œí¬ë…¸íŒŒí¬ì—­ì—ì„œ ê°•ì˜ì‹¤ê¹Œì§€ ì´ë™í•˜ëŠ” ë° 5ë¶„ì´ ì†Œìš”ëœë‹¤ê³  ê°€ì •í•˜ì)

ì¶”ì‚°í•œ ê°’ì˜ ì‹ ë¢°ì„±ì„ RMSEë¥¼ ì´ìš©í•˜ì—¬ í‘œí˜„í•˜ê³  ì„¤ëª…í•˜ì‹œì˜¤.

---

### ***(Problem 1-c)***

```python
total_time = 0
for k in range(i,j):
  total_time+=a[k]

total_time += b[i]
total_time += b[j]

RMSE = 0

for k in val["ì†Œìš”ì‹œê°„"]:
  RMSE += (k-total_time)**2
RMSE = RMSE**(1/2)/len(val)
print(RMSE)
total_time +=5
base_time = datetime.strptime("10:30", "%H:%M")
c = base_time - timedelta(minutes=total_time)
c_plus_b = c + timedelta(minutes=RMSE)
c_minus_b = c - timedelta(minutes=RMSE)
c_plus_b_str = c_plus_b.strftime("%H:%M")
c_minus_b_str = c_minus_b.strftime("%H:%M")
print(c_minus_b_str, c_plus_b_str)
```

09:46ì— ì¶œë°œí•´ì•¼ í•œë‹¤ëŠ” ê²°ê³¼ê°€ ë‚˜ì™”ë‹¤.

aì™€ bë¥¼ ì´ìš©í•˜ì—¬ êµ¬í•œ total_timeì— RMSEë¡œ êµ¬í•œ ì˜¤ì°¨ ë²”ìœ„ë¥¼ ê°ê° ë”í•˜ê±°ë‚˜ ë¹¼, c_plus_b_strê³¼ c_minis_b_strë¥¼ êµ¬í•˜ì˜€ë‹¤.

ê·¸ë˜ì„œ 9ì‹œ 46ë¶„ì— ì¶œë°œí•˜ë©´ ì¤‘ê°„ì— í™”ì¥ì‹¤ì— ê°€ì§€ ì•ŠëŠ” ì´ìƒ 10ì‹œ 30ë¶„ì— ë„ì°©í•  ìˆ˜ ìˆë‹¤.